#include "../../../Common/Cursor.hpp"
#include "../../../Common/Focus.hpp"

#include <array>

#include <NoesisPCH.h>

namespace Aetherverse::Services::Rendering::AppGUI
{
    static constexpr std::array<const CursorType, Noesis::CursorType_Count> CursorLUT
    {
        CursorType::Arrow,      // CursorType_None:
        CursorType::Deny,       // CursorType_No:
        CursorType::Arrow,      // CursorType_Arrow:
        CursorType::Arrow,      // CursorType_AppStarting:
        CursorType::Crosshair,  // CursorType_Cross:
        CursorType::Info,       // CursorType_Help:
        CursorType::IBeam,      // CursorType_IBeam:
        CursorType::Arrow,      // CursorType_SizeAll:
        CursorType::Arrow,      // CursorType_SizeNESW:
        CursorType::Arrow,      // CursorType_SizeNS:
        CursorType::Arrow,      // CursorType_SizeNWSE:
        CursorType::Arrow,      // CursorType_SizeWE:
        CursorType::Arrow,      // CursorType_UpArrow:
        CursorType::Arrow,      // CursorType_Wait:
        CursorType::Hand,       // CursorType_Hand:
        CursorType::Arrow,      // CursorType_Pen:
        CursorType::Arrow,      // CursorType_ScrollNS:
        CursorType::Arrow,      // CursorType_ScrollWE:
        CursorType::Arrow,      // CursorType_ScrollAll:
        CursorType::Arrow,      // CursorType_ScrollN:
        CursorType::Arrow,      // CursorType_ScrollS:
        CursorType::Arrow,      // CursorType_ScrollW:
        CursorType::Arrow,      // CursorType_ScrollE:
        CursorType::Arrow,      // CursorType_ScrollNW:
        CursorType::Arrow,      // CursorType_ScrollNE:
        CursorType::Arrow,      // CursorType_ScrollSW:
        CursorType::Arrow,      // CursorType_ScrollSE:
        CursorType::Arrow,      // CursorType_ArrowCD:
        CursorType::Arrow,      // CursorType_Custom:
    };

    auto CursorCallback([[maybe_unused]] void* user, [[maybe_unused]] Noesis::IView* view, Noesis::Cursor* cursor) noexcept -> void
    {
        if (Focus::IsCursorOverFrontendGUI()) [[unlikely]]
        {
            return;
        }
        SetCursor(CursorLUT[cursor->Type()]);
    }
}
